


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Date Tools (regolith.dates) &#8212; regolith - software group content managment system</title>
    <link rel="stylesheet" href="../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>

    
    
     
        <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    

    
     
        <script type="text/javascript" src="../_static/cloud.base.js"></script>
    

    
     
        <script type="text/javascript" src="../_static/cloud.js"></script>
    

    <link rel="shortcut icon" href="../_static/regolith-logo.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Run Control Validators (regolith.validators)" href="validators.html" />
    <link rel="prev" title="Tools (regolith.tools)" href="tools.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="validators.html" title="Run Control Validators (regolith.validators)"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="tools.html" title="Tools (regolith.tools)"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">regolith</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Regolith API</a> &#187;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-regolith.dates">
<span id="date-tools-regolith-dates"></span><span id="regolith-dates"></span><h1>Date Tools (<code class="docutils literal notranslate"><span class="pre">regolith.dates</span></code>)<a class="headerlink" href="#module-regolith.dates" title="Permalink to this headline">¶</a></h1>
<p>Date based tools</p>
<dl class="function">
<dt id="regolith.dates.date_to_float">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">date_to_float</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">m</em>, <em class="sig-param">d=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#date_to_float"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.date_to_float" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts years / months / days to a float, eg 2015.0818 is August
18th 2015.</p>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.day_to_str_int">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">day_to_str_int</code><span class="sig-paren">(</span><em class="sig-param">d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#day_to_str_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.day_to_str_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a day to an int form, str type, with a leading zero</p>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.find_gaps_overlaps">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">find_gaps_overlaps</code><span class="sig-paren">(</span><em class="sig-param">dateslist</em>, <em class="sig-param">overlaps_ok=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#find_gaps_overlaps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.find_gaps_overlaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Find whether there is a gap or an overlap in a list of date-ranges</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dateslist</strong> (<em>list of tuples of datetime.date objects</em>) – The list of date-ranges.</p></li>
<li><p><strong>overlaps_ok</strong> (<em>bool</em>) – Returns false if there are gaps but true if there are overlaps but no gaps</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if there are no gaps or overlaps else False</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.get_dates">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">get_dates</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">date_field_prefix=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#get_dates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.get_dates" title="Permalink to this definition">¶</a></dt>
<dd><p>given a dict like thing, return the date items</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the dict that contains the dates</p></li>
<li><p><strong>date_field_prefix</strong> (<em>string (optional)</em>) – the prefix to look for before the date parameter. For example given “submission”
the function will search for submission_day, submission_year, etc.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>dict containing datetime.date objects for valid begin_date end_date and date, and</em></p></li>
<li><p><em>prefix_date if a prefix string was passed.  Missing and empty dates and</em></p></li>
<li><p><em>date items that contain the string ‘tbd’ are not returned.  If no valid</em></p></li>
<li><p><em>date items are found, an empty dict is returned</em></p></li>
</ul>
</p>
</dd>
</dl>
<p>If “begin_date”, “end_date” or “date” values are found, if these are are in
an ISO format string they will be converted to datetime.date objects and
returned in the dictionary under keys of the same name.  A specified date
will override any date built from year/month/day data.</p>
<p>If they are not found the function will look for begin_year, end_year and
year.</p>
<p>If “year”, “month” and “day” are found the function will return these in the
“date” field and begin_date and end_date will match the “date” field. If only
a “year” is found, then the date attribute will be none but the begin and end
dates will be the first and last day of that respective year.</p>
<p>If year is found but no month or day are found the function will return
begin_date and end_date with the beginning and the end of the given year/month.
The returned date will be None.</p>
<p>If end_year is found, the end month and end day are missing they are set to
12 and 31, respectively</p>
<p>If begin_year is found, the begin month and begin day are missing they are set to
1 and 1, respectively</p>
<p>If a date field prefix is passed in this function will search for prefix_year as
well as prefix_month, prefix_day, and prefix_date. For example, if the prefix string
passed in is “submitted” then this function will look for submitted_date instead of
just date.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_dates</span><span class="p">({</span><span class="s1">&#39;submission_day&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;submission_year&#39;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span> <span class="s1">&#39;submission_month&#39;</span><span class="p">:</span> <span class="s1">&#39;Feb&#39;</span><span class="p">},</span> <span class="s2">&quot;submission&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This would return a dictionary consisting of the begin date, end, date, and date for the given input.
Instead of searching for “day” in the thing, it would search for “submission_day” since a prefix was
given. The following dictionary is returned (note that a submission_date and a date key are in the
dictionary):
{‘begin_date’: datetime.date(2020, 2, 10),</p>
<blockquote>
<div><p>‘end_date’: datetime.date(2020, 2, 10),
‘submission_date’: datetime.date(2020, 2, 10),
‘date’: datetime.date(2020, 2, 10)</p>
</div></blockquote>
<p>}</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_dates</span><span class="p">({</span><span class="s1">&#39;begin_year&#39;</span><span class="p">:</span> <span class="mi">2019</span><span class="p">,</span> <span class="s1">&#39;end_year&#39;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span> <span class="s1">&#39;end_month&#39;</span><span class="p">:</span> <span class="s1">&#39;Feb&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>This will return a dictionary consisting of the begin date, end date, and date for the given input.
Because no prefix string was passed in, the function will search for “date” in the input instead of
prefix_input. The following dictionary is returned:
{‘begin_date’: datetime.date(2019, 1, 1),</p>
<blockquote>
<div><p>‘end_date’: datetime.date(2020, 2, 29),</p>
</div></blockquote>
<p>}</p>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.get_due_date">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">get_due_date</code><span class="sig-paren">(</span><em class="sig-param">thing</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#get_due_date"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.get_due_date" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>thing</strong> (<em>dict</em>) – gets the field named ‘due_date’ from doc and ensurese it is a
datetime.date object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The due date as a datetime.date object</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.has_finished">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">has_finished</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">now=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#has_finished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.has_finished" title="Permalink to this definition">¶</a></dt>
<dd><p>given a thing with dates, returns true if the thing has finished</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the thing that we want to know whether or not it has finished</p></li>
<li><p><strong>now</strong> (<em>datetime.date object</em>) – a date for now.  If it is None it uses the current date.  Default is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if the thing has finished and false otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.has_started">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">has_started</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">now=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#has_started"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.has_started" title="Permalink to this definition">¶</a></dt>
<dd><p>given a thing with dates, returns true if the thing has started</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the thing that we want to know whether or not it is has started</p></li>
<li><p><strong>now</strong> (<em>datetime.date object</em>) – a date for now.  If it is None it uses the current date.  Default is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if the thing has started and false otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.is_after">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">is_after</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">now=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#is_after"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.is_after" title="Permalink to this definition">¶</a></dt>
<dd><p>given a thing with a date, returns true if the thing is after the input date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the thing that we want to know whether or not is after a date</p></li>
<li><p><strong>now</strong> (<em>datetime.date object</em>) – a date for now.  If it is None it uses the current date.  Default is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if the thing is after the date</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.is_before">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">is_before</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">now=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#is_before"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.is_before" title="Permalink to this definition">¶</a></dt>
<dd><p>given a thing with a date, returns true if the thing is before the input date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the thing that we want to know whether or not is before a date</p></li>
<li><p><strong>now</strong> (<em>datetime.date object</em>) – a date for now.  If it is None it uses the current date.  Default is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if the thing is before the date</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.is_between">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">is_between</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">start=None</em>, <em class="sig-param">end=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#is_between"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.is_between" title="Permalink to this definition">¶</a></dt>
<dd><p>given a thing with a date, returns true if the thing is between the start and end date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the thing that we want to know whether or not is after a date</p></li>
<li><p><strong>start</strong> (<em>datetime.date object</em>) – a date for the start.  If it is None it uses the current date.  Default is None</p></li>
<li><p><strong>end</strong> (<em>datetime.date object</em>) – a date for the end.  If it is None it uses the current date.  Default is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if the thing is between the start and end</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.is_current">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">is_current</code><span class="sig-paren">(</span><em class="sig-param">thing</em>, <em class="sig-param">now=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#is_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.is_current" title="Permalink to this definition">¶</a></dt>
<dd><p>given a thing with dates, returns true if the thing is current
looks for <a href="#id1"><span class="problematic" id="id2">begin_</span></a> and <a href="#id3"><span class="problematic" id="id4">end_</span></a> daty things (date, year, month, day), or just
the daty things themselves. e.g., begin_date, end_month, month, and so on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thing</strong> (<em>dict</em>) – the thing that we want to know whether or not it is current</p></li>
<li><p><strong>now</strong> (<em>datetime.date object</em>) – a date for now.  If it is None it uses the current date.  Default is None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>True if the thing is current and false otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.last_day">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">last_day</code><span class="sig-paren">(</span><em class="sig-param">year</em>, <em class="sig-param">month</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#last_day"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.last_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the last day of the month for the month given</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> (<em>integer</em>) – the year that the month is in</p></li>
<li><p><strong>month</strong> (<em>integer or string</em>) – the month.  if a string should be resolvable using regolith month_to_int</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The last day of that month</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.month_to_int">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">month_to_int</code><span class="sig-paren">(</span><em class="sig-param">m</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#month_to_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.month_to_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a month to an integer.</p>
</dd></dl>

<dl class="function">
<dt id="regolith.dates.month_to_str_int">
<code class="sig-prename descclassname">regolith.dates.</code><code class="sig-name descname">month_to_str_int</code><span class="sig-paren">(</span><em class="sig-param">m</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/regolith/dates.html#month_to_str_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#regolith.dates.month_to_str_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a month to an int form, str type, with a leading zero</p>
</dd></dl>

</section>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html" title="index">
          <img class="logo" src="../_static/regolith-logo.svg" alt="Logo"/>
        </a></p>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="tools.html"
                          title="Previous page">&larr; Tools (<code class="docutils literal notranslate"><span class="pre">regolith.tools</span></code>)</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="validators.html"
                          title="Next page">&rarr; Run Control Validators (<code class="docutils literal notranslate"><span class="pre">regolith.validators</span></code>)</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="validators.html" title="Run Control Validators (regolith.validators)"
             >next</a></li>
        <li class="right" >
          <a href="tools.html" title="Tools (regolith.tools)"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">regolith</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >Regolith API</a> &#187;</li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, Anthony Scopatz.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>